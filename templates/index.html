{% extends "base.html" %}


<{% block body %}>


<div class = "text-center">
   <br>
   <h1> CRUD Operations </h1>
   <br>
</div>


<div class="container">
    <div class="row">
        <div class="col md-12">
            
            <div class="jumbotron p-3">

                <h2><button type="button" 
                data-toggle="modal" data-target="#mymodal">Add Record</button></h2>

                {% with messages = get_flashed_messages() %}
 
                {% if messages %}
 
                {% for message in messages %}
 
                <div class="alert alert-success alert-dismissable" role="alert">
 
                    <button type="button" class="close" data-dismiss="alert" aria-label="close">
 
                        <span aria-hidden="true">x</span>
 
                    </button>
 
 
                {{message}}
 
 
                </div>
 
 
                {% endfor %}
 
                {% endif %}
                {% endwith %}
 
 

                <table class="table table-hover table-light">

                    <tr>

                        <th>Student ID</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Date of Birth</th>
                        <th>Amount Due</th>
                        <th>Action</th>

                    </tr>

                    {% for row in students %}

                    <tr>

                        <td>{{row.student_id}}</td>
                        <td>{{row.first_name}}</td>
                        <td>{{row.last_name}}</td>
                        <td>{{row.dob}}</td>
                        <td>{{row.amount_due}}</td>
                        <td>
                            <a href="/update/{{row.student_id}}" data-toggle="modal" data-target="#modaledit{{row.student_id}}">Update</a> 
                            <a href="/delete/{{row.student_id}}" >Delete</a>  
                            


                        </td>

                    </tr>
                    
                <!-- Modal Edit Employee-->
<div id="modaledit{{row.student_id}}" class="modal fade" role="dialog">
    <div class="modal-dialog">
 
 
       <div class="modal-content">
 
 
          <div class="modal-header">
 
 
             <h4 class="modal-title">Update Table</h4>
 
 
          </div>
 
 
          <div class="modal-body">
 
 
             <form action="{{url_for('update')}}" method="POST">
 
 
                <div class="form-group">
 
 
                   <label>First Name</label>
                    <input type="hidden"  name="student_id" value="{{row.student_id}}">
 
                   <input type="text" class="form-control" name="first_name" value="{{row.first_name}}">
 
 
                </div>
 
 
 
                <div class="form-group">
 
 
                   <label>Last Name</label>
 
                   <input type="text" class="form-control" name="last_name" value="{{row.last_name}}">
 
 
                </div>
 
 
                <div class="form-group">
 
 
                   <label>DOB</label>
 
                   <input type="date" class="form-control" name="dob" value="{{row.dob}}">
 
 
                </div>
                
                <div class="form-group">
 
 
                  <label>Amount Due</label>

                  <input type="number" class="form-control" name="amount_due" value="{{row.amount_due}}">


               </div>
 
                <div class="form-group">
 
 
                   <button type="submit">Update</button>
 
 
                </div>
 
 
             </form>
 
 
          </div>
 
 
 
 
       </div>
 
 
    </div>
 
 </div>
               
 
                   {% endfor %}
               </table>



            </div>



<div id="mymodal" class="modal fade" role="dialog">
    <div class="modal-dialog">
       <div class="modal-content">
          <div class="modal-header">
 
             <h4 class="modal-title">Student Info</h4>
          </div>
          <div class="modal-body">
 
             <form action="{{url_for('insert')}}" method="POST">
 
 
                <div class="form-group">
 
                   <label>First Name</label>
                   <input type="text" class="form-control" name="first_name" required="1">
 
 
                </div>
 
 
                 <div class="form-group">
 
 
                   <label>Last Name</label>
                   <input type="text" class="form-control" name="last_name" required="1">
 
 
                </div>
 
 
                 <div class="form-group">
 
 
                   <label>DOB</label>
                   <input type="date" class="form-control" name="dob" required="1">
 
 
                </div>
 
                <div class="form-group">
 
 
                  <label>Amount Due</label>
                  <input type="number" class="form-control" name="amount_due" required="1">


               </div>
 
                <div class="form-group">
 
 
                   <button type="submit">Add Record</button>
 
 
                </div>
 
 
             </form>
 
 
          </div>
 
 
 
       </div>
 
 
    </div>
 
 
 </div>
 
    </div>
</div>
{% endblock %}